# TCP/IP Networking
- **TCP/IP (Transmission Control Protocol/Internet Protocol)** is the networking system that underlies the Internet. TCP/IP does not depend on any particular hardware or operating system, so devices that speak TCP/IP can all exchange data despite their many differences.
- TCP/IP works on networks of any size or topology, even when they are not connected to the outside world.

## TCP/IP and its relationship to the Internet
### Network Standards and documentation
- The technical activities of the Internet community are summarized in documents known as Requests for Comments or RFCs.
  - These are comprised of Protocol standards, proposed changes, and informational bulletins.
  - These start as Internet Drafts and then either die or are promoted to the RFC series.
  - These are numbered sequentially, but also come with descriptive sub-titles but are formally cited by their number.
  - Once distributed the contents of an RFC are never changed.

## Networking Basics
- **TCP/IP** is a protocol "suite," meaning a set of network protocols designed to work smoothly together. It includes several components, each defined by a standards-track RFC or a series of RFCs:
  - **IP - Internet Protocol** - routes data packets from one machine to another (RFC791).
  - **ICMP - Internet Control Message Protocol** - defines several kinds of low-level support for IP, including error messages, routing assistance, and debugging help (RFC792).
  - **ARP - Address Resolution Protocol** - translates IP addresses to hardware addresses (RFC826).
  - **UDP  - User Datagram Protocol** - implements unverified, one way data delivery (RFC768).
  - **TCP  - Transmission Control Protocol** - implements reliable, full duplex, flow-controlled, error-corrected conversations (RFC793).
- These protocols are arranged in a hierarchy or "stack," with the higher-level protocols making use of the protocols beneath them. TCP/IP is conventionally described as a five-layer system, but the actual TCP/IP protocols inhabit only three of these layers.
- There is a good TCP/IP layering model diagram on **page 379**, I tried to re-create it but it wasn't legible
- We are technically out of IPv4 address space. But everything is still OK because of the following technologies:
  - **Network Address Translation (NAT)** - Allows entire networks of machines to hide behind a single IPv4 address.
  - **Classless Inter-Domain Routing (CIDR)** - Flexibly subdivides networks and promotes efficient back-bone routing
- Contention of IPv4 address is still an issue, but this tends to be reallocated in economic rather than technological ways nowadays.
- The underlying issue limiting IPv6's adoption is that IPv4 support is still mandatory for a device to be a functional citizen of the Internet (as of 2017).

### Packets and encapsulation
- TCP/IP supports a variety of physical networks and transport systems, these include:
  - Ethernet, token ring, MPLS (Multiprotocol Label Switching), wireless Ethernet, and serial-line-based systems. 
- Hardware is managed within the link layer of the TCP/IP architecture, and **higher-level protocols do not know or care about specific hardware being used**
- **Packets core properties:**
  - Data travels on a network in the form of packets, which are bursts of data with a maximum length imposed by the link layer.
  - Each packet consists of a header and a payload.
	- The header tells the packet where the packet came from and where it's going. It can also include checksums, protocol-specific information, or other handling instructions.
	- The payload is the data to be transferred.
- The name of the primitive data unit depends on the layer of the protocol (although you can get away with calling all of these a "packet" as a generic term in most situations).
  - **TCP layer - a segment**
  - **IP layer - a packet**
  - **Link layer - a frame**

#### Encapsulation
- As a packet travels down the protocol stack (from TCP or UDP transport to IP to Ethernet to the physical wire) in preparation for being sent, each protocol adds its own header information. 
- **Each protocol's finished packet becomes the payload part of the packet generated by the next protocol.** This is known as **encapsulation**.
- On the receiving machine, the encapsulation is reversed as the packet travels back up the protocol stack.

### Ethernet framing
- One of the main tasks of the link layer is to add headers to packets and to put separators between them, this process is known as **framing**. The headers contain each packet's link-layer addressing information and checksums, the separators ensure that receivers can tell where one packet stops and the next one begins.
- The link layer is divided into two parts: 
  - **MAC, the Media Access Control sublayer** - deals with the media and transmits packets onto the wire.
  - **LLC, the Logical Link Control sublayer** - handles the framing

## Packet Addressing
- Several addressing schemes are used in combination:
  - **MAC (Media Access Control)** addresses for use by hardware
  - **IPv4 and IPv6** - addresses used for use by software
  - **Hostnames** - for use by people

### Hardware (MAC) addressing
- **Each of a host's network interfaces usually has one link-layer MAC address that distinguishes it from other machines on the physical network, in addition to one or more IP addresses that identify the interface on the global Internet.**
  - **IP addresses identify _network interfaces, not machines_**
- The lowest level of addressing is dictated by network hardware.
  - Ethernet devices are assigned a unique 6-byte hardware address at the time of manufacture. These are traditionally written as a series of 2-digit hex bytes separated by colons; for example, `00:50:8d:9a:3b:df`
- Token ring interfaces have a similar address that is also six bytes long.
- A 6-byte Ethernet address is divided into two parts:
  - The first three bytes identify the manufacturer of the hardware. These are actually IEEE Organizationally Unique Identifiers (OUIs) that can be looked up directly on the IEEE's database.
  - The last three bytes are a unique serial number that the manufacturer assigns.
- In theory, Ethernet hardware addresses are permanently assigned and immutable. However, many network interfaces let you override the hardware address and set one of your own choosing. This can be handy if you need to replace a broken machine or network card and for some reason must use the old MAC address. But for simplicity its generally preferable to preserve the uniqueness of MAC addresses.

### IP addressing
- **IP addressing** can sometimes be referred to as **Internet addressing**.
- **IP addresses** are hardware independent. **Within any particular network context, an IP address identifies a specific and unique destination.**
  - Although it is not quite accurate to say that IP addresses are globally unique because several special cases muddy the water:
	- NAT uses one interface's IP address to handle traffic for multiple machines.
	- IP private address spaces are addresses that multiple sites can use at once, as long as the addresses are not visible to the Internet.
	- Anycast addressing shares one IP address among several machines.

